\documentclass[a4paper, 11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}

\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{authblk}

\usepackage{hyperref}
\usepackage{listings, graphicx}
\usepackage{color, hyperref}
\hypersetup{
	colorlinks=true,
	linktoc=all,
	linkcolor=black,
}
\usepackage{lmodern}  % for bold teletype font
\usepackage{amsmath}  % for \hookrightarrow
\usepackage{xcolor}   % for \textcolor

\usepackage{titling}

\lstset{literate=
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}

\lstset{
  basicstyle=\ttfamily,
  columns=fullflexible,
  frame=single,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}
%\pretitle{\begin{center}\fontesize{16pt}{16pt}\selectfont}
%\posttitle{\par\end{center}\vskip 3em}
\font\myfont=cmr12 at 42pt
\title{\myfont {Robots programmables}}
\author{\huge {COTREZ Léo}\and \huge {ORNIACKI Thomas}\and \\Université Paris-VIII, Saint-Denis, France\and \\Licence 2 Informatique}
\date{Premier Semestre 2018}

\begin{document}
\maketitle

\newpage
\tableofcontents

\newpage
\section{Procédures mise en \oe uvre}
\subsection{Les problèmatiques}
\subsubsection{Création de l'air de jeu}
Afin de générer une aire de jeu personnalisable nous avons decidé de stocker les maps dans des fichiers, notre jeu devait donc être en mesure de récupérer ces données et les utiliser. Pour ce faire nous avons commencé par coder une fonction qui récupére chaque caractère du fichier et les stocke dans un tableau de la taille du fichier que l'on calcule préalablement. Pendant le parcours du fichier ....

\newpage
\section{Mode d'emploi}
\subsection{Language minimaliste}
Le langage minimaliste que nous avons developpé utilise une notation préfixé sans parenthèses, l'arité des opérateurs est fixé de la manière suivante :\\\\
\begin{tabular}{|l|c|l|l|}
   \hline
   Commande & Arité & Description & Exemple \\
	 \hline
   quit & 0 & Abandonner la partie & quit \\
   \hline
   six & sept & & huit \\
   \hline
	 Commande & Arité & & Exemple \\
	 \hline
   quit & 0 & & quit \\
   \hline
   six & sept & & huit \\
   \hline
	 Commande & Arité & & Exemple \\
	 \hline
   quit & 0 & & quit \\
   \hline
   six & sept & & huit \\
   \hline
	 Commande & Arité & & Exemple \\
	 \hline
   quit & 0 & & quit \\
   \hline
   six & sept & & huit \\
   \hline
	 Commande & Arité & & Exemple \\
	 \hline
   quit & 0 & & quit \\
   \hline
   six & sept & & huit \\
   \hline
\end{tabular}

\subsection{Lancer le jeu}
\subsection{Jouer}

\newpage
\section{Listing du programme}
\subsection{Les fonctions de \emph{fct\_mini.c}}
\begin {lstlisting} [language=c]
float get_coord(robot *bot, char *axis)
\end{lstlisting}
La fonction \emph{get\_coord}, prend en argument un pointeur sur une structure \emph{robot} et une chaîne de caractères \emph{axis} si cette dernière est \emph{x} ou \emph{y}, alors la fonction retournera alors respectivement la valeur de la position du robot sur l'axe des abscisses ou celui des ordonnées.\\

\begin {lstlisting} [language=c]
short get_direction(robot *bot)
\end{lstlisting}
La fonction \emph{get\_direction}, prend en argument un pointeur sur une structure \emph{robot} et retourne la valeur de la direction du robot 0, 1, 2, ou 3 respectivement pour haut, droite, bas, gauche.\\

\begin {lstlisting} [language=c]
short get_pv(robot *bot)
\end{lstlisting}
La fonction \emph{get\_pv}, prend en argument un pointeur sur une structure \emph{robot} et retourne le nombre de point de vie du robot.\\

\begin {lstlisting} [language=c]
unsigned long long get_money(robot *bot)
\end{lstlisting}
La fonction \emph{get\_money}, prend en argument un pointeur sur une structure \emph{robot} et retourne le solde du robot (\emph{unsigned long long}, il aime vraiment beaucoup l'argent ce robot).\\

\begin {lstlisting} [language=c]
short get_nb_bullet(robot *bot)
\end{lstlisting}
La fonction \emph{get\_nb\_bullet}, prend en argument un pointeur sur une structure \emph{robot} et retourne le nombre de balle du robot.\\

\begin {lstlisting} [language=c]
short get_armor(robot *bot)
\end{lstlisting}
La fonction \emph{get\_armor}, prend en argument un pointeur sur une structure \emph{robot} et retourne le nombre de point d'armure du robot.\\

Les fonctions suivantes peuvent prendre en argument des fils de messages \emph{server}, \emph{client}, une chaîne de caractères \emph{buffer} et un entier \emph{taille} afin de communiquer avec le serveur.\\

\begin {lstlisting} [language=c]
int avancer(robot *bot, int move, mqd_t server, mqd_t client, char* buffer, int taille)
\end{lstlisting}
La fonction \emph{avancer}, prend en argument un pointeur sur une structure \emph{robot}, un entier \emph{move} et demande au plus possible le déplacement du robot de \emph{move} dans sa direction actuelle au serveur.\\

\begin {lstlisting} [language=c]
int aim(robot *bot, int x, int y)
\end{lstlisting}
La fonction \emph{aim}, prend en argument un pointeur sur une structure \emph{robot}, deux entiers \emph{x}, \emph{y} et retoune angle avec lequel le robot doit tirer afin d'atteindre le point formé par ces coordonnées, depuis sa position actuelle.\\

\begin {lstlisting} [language=c]
int seek(robot *bot, char *obj, char *axis, mqd_t server, mqd_t client, char* buffer, int taille)
\end{lstlisting}
La fonction \emph{seek}, prend en argument un pointeur sur une structure \emph{robot}, deux chaines de caractères \emph{obj}, \emph{axis} et retoune si possible la coordonnée, \emph{x} ou \emph{y} selon l'\emph{axis}, de l'objet \emph{obj} le plus proche dans son champ visuel\\

\begin {lstlisting} [language=c]
int ramasser(robot *bot, mqd_t server, mqd_t client, char* buffer, int taille)
\end{lstlisting}
La fonction \emph{ramasser}, demande au serveur si le \emph{bot} pourrait rammasser un collectible tel qu'un coffre , de l'armure ou bien des balles\\

\begin {lstlisting} [language=c]
int tourner(robot *bot, short direc, mqd_t server)
\end{lstlisting}
La fonction \emph{tourner}, demande au serveur de changer la direction du \emph{bot} de \emph{direc} fois dans le sens des aiguilles d'une montre dans le référentiel haut, droite, bas, gauche.\\

\begin {lstlisting} [language=c]
int tirer(robot *bot, float angle, mqd_t server)
\end{lstlisting}
La fonction \emph{tirer}, demande au serveur de un tir d'angle \emph{angle} depuis la position courrante du  \emph{bot}\\

Les deux fonctions suivantes prennent en arguments la structure \emph{cmd sub\_com} représentant la commande saisie par l'utilisateur manuellement ou par un script ainsi qu'un pointeur sur un pointeur de structure \emph{aff}, \emph{dico} qui va permettre de stocker les variables définit par l'utilisateur.

\begin {lstlisting} [language=c]
int eval(cmd sub_com, robot *bot, mqd_t server, mqd_t client, char* buffer, int taille, aff **dico)
\end{lstlisting}
La fonction \emph{eval}, va se charger de retourner la valeur de retour de la fonction associée à la commande \emph{sub\_com}.\\

\begin {lstlisting} [language=c]
int interp(cmd sub_com, robot *bot, mqd_t server, mqd_t client, char* buffer, int taille, aff **dico)
\end{lstlisting}
La fonction \emph{interp}, va se charger d'interpréter correctement la structure commande \emph{sub\_com}.\\

\subsection{Les fonctions de \emph{interpreteur.c}}
\begin {lstlisting} [language=c]
char* get_line(FILE *fd)
\end{lstlisting}
La fonction \emph{get\_line}, prend en argument \emph{fd}, un pointeur sur un descripteur de fichier et retourne une chaîne de caractères correspondant au contenu du fichier se trouvant entre le descripteur et le reste de la ligne.\\

\begin {lstlisting} [language=c]
cmd create_cmd(char **ligne, FILE *fd)
\end{lstlisting}
La fonction \emph{create\_cmd}, prend en argument \emph{ligne}, un pointeur sur chaîne de caractères et \emph{fd}, un pointeur sur un descripteur de fichier et retourne le contenu du fichier sur lequel pointe \emph{fd} en une structure \emph{cmd}.\\

\newpage
\subsection{Les fonctions de \emph{client.c}}
\begin {lstlisting} [language=c]
int reception(mqd_t fdem, char** buffer, int taille, robot* bot, char obj)
\end{lstlisting}
La fonction \emph{reception}, prend en argument \emph{fdem}, un descripteur sur une file de message en lecture, \emph{buffer}, un pointeur sur une chaine de caractère, \emph{taille}, la taille des message lu, \emph{bot}, un pointeur sur un robot et \emph{obj}, la valeur recherché par la fonction qui appelle \emph{reception}. Cette fonction va traduire les messages envoyer par le serveur et retourner l'information demandé par client\\

\begin {lstlisting} [language=c]
int client(char* name)
\end{lstlisting}
La fonction \emph{client}, prends en argument \emph{name}, une chaine de caractère qui represente le nom du robot associé a ce client. Cette fonction éxécute dans l'ordre les differentes fonctions pouvant etre appelé par le client\\

\newpage
\subsection{Les fonctions de \emph{server.c}}
\begin {lstlisting} [language=c]
int server(char* map\_name)
\end{lstlisting}
La fonction \emph{server}, prends en argument \emph{map\_name}, une chaine de caractère qui represente le nom de la map à charger. Cette
fonction éxécute dans l'ordre les differentes fonctions pouvant etre appelé par le serveur\\

\begin {lstlisting} [language=c]
coord bot\_interact(map mapOfGame, robot\_liste listOfBot, robot* bot, char* buffer)
\end{lstlisting}
La fonction \emph{bot\_interact}, prends en argument \emph{mapOfGame}, la structure qui contient les données de la map, \emph{listOfBot}, la liste des robots present dans le jeu, \emph{bot}, un pointeur sur le robot qui demande une interaction et \emph{buffer} la chaine de caractère qui contient la demande du robot. Cette fonction renvois les coordonnées de l'objet, demandé par le client, au serveur\\

\begin {lstlisting} [language=c]
void start(mqd\_t* list\_mqueue)
\end{lstlisting}
La fonction \emph{start}, prends en argument \emph{list\_mqueue}, la liste des file de message des clients connecté au serveur.\\

\begin {lstlisting} [language=c]
void move_bullet(bullet_liste* list_bullet, robot_liste* bot_list, map mapOfGame, mqd_t* list_mqueue)
\end{lstlisting}
La fonction \emph{move_bullet}, prends en argument \emph{list_bullet}, la liste des balles presente sur la map, \emph{bot_list}, un pointeur sur la liste des robots present dans le jeu, \emph{mapOfGame}, la structure qui contient les données de la map et \emph{list_mqueue} la liste des file de message des clients connecté au serveur.\\

\begin {lstlisting} [language=c]
coord bot_interact(map mapOfGame, robot_liste listOfBot, robot* bot, char* buffer)
\end{lstlisting}
La fonction \emph{bot_interact}, prends en argument \emph{mapOfGame}, la structure qui contient les données de la map, \emph{listOfBot}, la liste des robots present dans le jeu, \emph{bot}, un pointeur sur le robot qui demande une interaction et \emph{buffer} la chaine de caractère qui contient la demande du robot.\\

\newpage
\section{Traces d'utilisation}
\subsection{Captures d'écran}

\newpage
\section{Code complet}
\subsection{Les déclarations}
%\lstinputlisting[language=c]{../game.h}

\newpage
\subsection{Fonctions utilitaires}
%\lstinputlisting[language=c]{../game.c}

\newpage
\subsection{Le client}
%\lstinputlisting[language=c]{../client.c}

\newpage
\subsection{Le serveur}
%\lstinputlisting[language=c]{../server.c}

\newpage
\subsection{Les fonctions minimalistes}
%\lstinputlisting[language=c]{../fct_mini.c}

\newpage
\subsection{L'interpréteur}
%\lstinputlisting[language=c]{../interpreteur.c}

\end{document}
